<!doctype html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="theme-color" media="(prefers-color-scheme: light)" content="#f7f7f7"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1b1b1e"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><meta name="viewport" content="width=device-width, user-scalable=no initial-scale=1, shrink-to-fit=no, viewport-fit=cover" ><meta name="generator" content="Jekyll v4.4.1" /><meta property="og:title" content="Reverse Proxy in Home Lab" /><meta property="og:locale" content="en" /><meta name="description" content="Whats and Whys?" /><meta property="og:description" content="Whats and Whys?" /><link rel="canonical" href="https://tanishq.page/blog/posts/homelab-npm/" /><meta property="og:url" content="https://tanishq.page/blog/posts/homelab-npm/" /><meta property="og:site_name" content="Tanishq Rupaal" /><meta property="og:image" content="https://tanishq.page/blog/assets/img/covers/homelab-cover.jpeg" /><meta property="og:image:alt" content="HomeLab Artwork" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2025-01-29T19:11:00-05:00" /><meta name="twitter:card" content="summary_large_image" /><meta property="twitter:image" content="https://tanishq.page/blog/assets/img/covers/homelab-cover.jpeg" /><meta name="twitter:image:alt" content="HomeLab Artwork" /><meta property="twitter:title" content="Reverse Proxy in Home Lab" /><meta name="twitter:site" content="@etheriosking" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2025-01-29T19:11:00-05:00","datePublished":"2025-01-29T19:11:00-05:00","description":"Whats and Whys?","headline":"Reverse Proxy in Home Lab","image":{"alt":"HomeLab Artwork","url":"https://tanishq.page/blog/assets/img/covers/homelab-cover.jpeg","@type":"imageObject"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://tanishq.page/blog/posts/homelab-npm/"},"url":"https://tanishq.page/blog/posts/homelab-npm/"}</script><title>Reverse Proxy in Home Lab | Tanishq Rupaal</title><link rel="apple-touch-icon" sizes="180x180" href="/blog/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/blog/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/blog/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/blog/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/blog/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Tanishq Rupaal"><meta name="application-name" content="Tanishq Rupaal"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/blog/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="/blog/assets/css/jekyll-theme-chirpy.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.7.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tocbot@4.32.2/dist/tocbot.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/glightbox@3.3.0/dist/css/glightbox.min.css"> <script src="/blog/assets/js/dist/theme.min.js"></script> <script defer src="https://cdn.jsdelivr.net/combine/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js,npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.umd.min.js,npm/glightbox@3.3.0/dist/js/glightbox.min.js,npm/clipboard@2.0.11/dist/clipboard.min.js,npm/dayjs@1.11.13/dayjs.min.js,npm/dayjs@1.11.13/locale/en.js,npm/dayjs@1.11.13/plugin/relativeTime.js,npm/dayjs@1.11.13/plugin/localizedFormat.js,npm/tocbot@4.32.2/dist/tocbot.min.js"></script> <script defer src="/blog/assets/js/dist/post.min.js"></script> <script defer src="/blog/app.min.js?baseurl=/blog&register=true" ></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-B88HEPZBVJ"></script> <script> document.addEventListener('DOMContentLoaded', () => { window.dataLayer = window.dataLayer || []; function gtag() { dataLayer.push(arguments); } gtag('js', new Date()); gtag('config', 'G-B88HEPZBVJ'); }); </script><body><aside aria-label="Sidebar" id="sidebar" class="d-flex flex-column align-items-end"><header class="profile-wrapper"> <a href="/blog/" id="avatar" class="rounded-circle"><img src="/blog/assets/Abstract.png" width="112" height="112" alt="avatar" onerror="this.style.display='none'"></a> <a class="site-title d-block" href="/blog/">Tanishq Rupaal</a><p class="site-subtitle fst-italic mb-0">Cybersecurity Professional</p></header><nav class="flex-column flex-grow-1 w-100 ps-0"><ul class="nav"><li class="nav-item"> <a href="/blog/" class="nav-link"> <i class="fa-fw fas fa-home"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/blog/categories/" class="nav-link"> <i class="fa-fw fas fa-stream"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/blog/archives/" class="nav-link"> <i class="fa-fw fas fa-archive"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/blog/tags/" class="nav-link"> <i class="fa-fw fas fa-tags"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/blog/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle"></i> <span>ABOUT</span> </a></ul></nav><div class="sidebar-bottom d-flex flex-wrap align-items-center w-100"> <button type="button" class="btn btn-link nav-link" aria-label="Switch Mode" id="mode-toggle"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/tanq16" aria-label="github" target="_blank" rel="noopener noreferrer" > <i class="fab fa-github"></i> </a> <a href="https://twitter.com/etheriosking" aria-label="twitter" target="_blank" rel="noopener noreferrer" > <i class="fab fa-twitter"></i> </a> <a href="javascript:location.href = 'mailto:' + ['dragonking47','proton.me'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="https://linkedin.com/in/tanishqrupaal" aria-label="linkedin" target="_blank" rel="noopener noreferrer" > <i class="fab fa-linkedin"></i> </a></div></aside><div id="main-wrapper" class="d-flex justify-content-center"><div class="container d-flex flex-column px-xxl-5"><header id="topbar-wrapper" aria-label="Top Bar"><div id="topbar" class="d-flex align-items-center justify-content-between px-lg-3 h-100" ><nav id="breadcrumb" aria-label="Breadcrumb"> <span> <a href="/blog/">Home</a> </span> <span>Reverse Proxy in Home Lab</span></nav><button type="button" id="sidebar-trigger" class="btn btn-link"> <i class="fas fa-bars fa-fw"></i> </button><div id="topbar-title"> Post</div><button type="button" id="search-trigger" class="btn btn-link"> <i class="fas fa-search fa-fw"></i> </button> <search id="search" class="align-items-center ms-3 ms-lg-0"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..." > </search> <button type="button" class="btn btn-link text-decoration-none" id="search-cancel">Cancel</button></div></header><div class="row flex-grow-1"><main aria-label="Main Content" class="col-12 col-lg-11 col-xl-9 px-md-4"><article class="px-1" data-toc="true"><header><h1 data-toc-skip>Reverse Proxy in Home Lab</h1><div class="post-meta text-muted"> <span> Posted <time data-ts="1738195860" data-df="ll" data-bs-toggle="tooltip" data-bs-placement="bottom" > Jan 29, 2025 </time> </span><div class="mt-3 mb-3"> <a href="/blog/assets/img/covers/homelab-cover.jpeg" class="popup img-link preview-img shimmer"><img src="/blog/assets/img/covers/homelab-cover.jpeg" alt="HomeLab Artwork" width="1200" height="630" loading="lazy"></a><figcaption class="text-center pt-2 pb-2">HomeLab Artwork</figcaption></div><div class="d-flex justify-content-between"> <span> By <em> <a href="https://twitter.com/etheriosking">Tanishq Rupaal</a> </em> </span><div> <span class="readtime" data-bs-toggle="tooltip" data-bs-placement="bottom" title="1596 words" > <em>8 min</em> read</span></div></div></div></header><div id="toc-bar" class="d-flex align-items-center justify-content-between invisible"> <span class="label text-truncate">Reverse Proxy in Home Lab</span> <button type="button" class="toc-trigger btn me-1"> <i class="fa-solid fa-list-ul fa-fw"></i> </button></div><button id="toc-solo-trigger" type="button" class="toc-trigger btn btn-outline-secondary btn-sm"> <span class="label ps-2 pe-1">Contents</span> <i class="fa-solid fa-angle-right fa-fw"></i> </button> <dialog id="toc-popup" class="p-0"><div class="header d-flex flex-row align-items-center justify-content-between"><div class="label text-truncate py-2 ms-4">Reverse Proxy in Home Lab</div><button id="toc-popup-close" type="button" class="btn mx-1 my-1 opacity-75"> <i class="fas fa-close"></i> </button></div><div id="toc-popup-content" class="px-4 py-3 pb-4"></div></dialog><div class="content"><h2 id="whats-and-whys"><span class="me-2">Whats and Whys?</span><a href="#whats-and-whys" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>A <em>forward proxy</em> sends a legitimate request made by a user to the origin of the service that the user requested. It also forwards back the response from the origin server and is considered part of the “client” when dumbing down client-server communication. Forward proxies (usually just called a proxy) is very commonly used for various purposes.</p><p>A <em>reverse proxy</em> does a similar passthrough of communication but instead sits in front of one or more servers, i.e., is considered part of the “server” when dumbing down client-server communication. Requests are made to the origin servers but intercepted by the reverse proxy and then it does the transitive communication like a forward proxy.</p><p>The reason reverse proxies are common for homelab use is that it allows creating a single entrypoint to all services contained within. It also helps exposing it to the internet and can be used to enforce TLS on all services even if a service itself doesn’t use HTTPS.</p><h2 id="my-intentions"><span class="me-2">My Intentions</span><a href="#my-intentions" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>I run my homelab on a Debian machine within Docker containers. I also have a relatively less flexible ISP, so I don’t want to expose anything directly from my router. Lastly I own a domain (purchased from <em>Cloudflare</em>) for my homelab use (different from the one you’re reading this post on). For the remainder of the post, I’ll refer to my domain as <code class="language-plaintext highlighter-rouge">revp.home</code>.</p><p>Given this setup, my intention was as follows →</p><ul><li>I want to reduce what ports I expose on my Debian server, ideally such that only the reverse proxy management, reverse proxy web ports, and 53 (for DNS, yes I don’t use DoH or DoT <em>yet</em>) are exposed.<li>I’d like most of my containers to not even expose ports on localhost, instead stay within the Docker network.<li>All my services should be exposed via HTTPS irrespective of how I access them.<li>My domain should be reachable externally with the convention of <code class="language-plaintext highlighter-rouge">SERVICE.revp.home</code> providing me access to my service.<li>I should be able to use the same domain inside my home network and it should directly route to my Debian server rather than going over the internet,<li>My services exposed externally should have authentication, while those within the network should not.</ul><p>The Software Stack I’ll be using contains of the following →</p><ul><li>Nginx Proxy Manager<ul><li>There are a lot of alternatives to this like Caddy or even configuring vanilla Nginx for it.<li>Pick your poison, what you need to do doesn’t change either way.</ul><li>Cloudflare tunnels<ul><li>This makes it easy to expose things externally without messing with your router or upsetting your ISP.<li>There are some cons like limited bandwidth and throttling, making it a no-go for services like Plex or Jellyfin; not an issue for me personally, so do your research.</ul></ul><blockquote class="prompt-tip"><p>Another way connect to your home network services is by using a VPN. This isn’t something explored in this post, but is a very popular option that allows streaming too. However, requires additional server setup, so it wasn’t something I required.</p></blockquote><h2 id="implementation"><span class="me-2">Implementation</span><a href="#implementation" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>There’s a couple steps to implement this kind of a setup, starting with setting up Cloudflare tunnels. Cloudflare also acts as a reverse proxy, however, has its own agent-server infrastructure in place to allow visibility via zero trust. Following the tunnel setup, there needs to be a common Docker network to allow connectivity. This would allow using NPM (Nginx Proxy Manager) to reach all services.</p><h3 id="cloudflare-tunnels"><span class="me-2">Cloudflare Tunnels</span><a href="#cloudflare-tunnels" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><blockquote class="prompt-warning"><p>Setting up Cloudflare tunnels is a bit outside the scope of what I want to include in this blog. It’s also not complicated so I’ve given high level steps here instead of a detailed walkthrough.</p></blockquote><p>You should already have a domain configured and an account made with Cloudflare. If your domain is not registered with Cloudflare, add it to Cloudflare and change nameservers as needed.</p><p>With the domain active, choose <strong>Zero Trust</strong> on the left hand side and naviaget to <strong>Networks &gt; Tunnels</strong> to setup your tunnels. Here you can create a <code class="language-plaintext highlighter-rouge">cloudflared</code> tunnel (establishes an outbound-only connection to Cloudflare) associated with your domain.</p><p>Configure the tunnel and Cloudflare will walk you through installing and running your connector agent. Select a Docker environment and store the token in an <code class="language-plaintext highlighter-rouge">.env</code> file for your compose file. Ensure this new service in your homelab gets the network configuration detailed under the <em>Linking Services to NPM</em> subheading below. The connector will show up and you can finish off the setup by routing a random <code class="language-plaintext highlighter-rouge">localhost:7777</code> at the end.</p><blockquote class="prompt-danger"><p>Finish off the rest of the local service setup in the following subsections first before continuing with this subsection.</p></blockquote><p>Once the tunnel is saved, add your services under the <strong>Public Hostname</strong> tab. This is what helps your homelab services become reachable. However, these are all publicly available at this point without any authentication. So, go to <strong>Access &gt; Applications</strong> and add an application with the URL <code class="language-plaintext highlighter-rouge">*.revp.home</code>, and configure a <strong>Policy</strong> to allow access to your subdomains.</p><p>There are several ways of doing this; I prefer using a certificate to allow only my devices to access the services. Explore and do what best suits your use case!</p><h3 id="setting-up-npm"><span class="me-2">Setting up NPM</span><a href="#setting-up-npm" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>With our Cloudflare tunnel in place and ready to point to services, we need to configure Nginx Proxy Manager. NPM is a reverse proxy that makes it easy to manage reverse proxy routes in a UI and can also help set up SSL certificates using LetsEncrypt for the local network.</p><p>NPM can be setup with a Docker container using a compose file. First, setup the persistence directory as follows →</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">mkdir</span> <span class="nt">-p</span> <span class="nv">$HOME</span>/npm/<span class="o">{</span>data,letsencrypt<span class="o">}</span>
</pre></table></code></div></div><p>Then, deploy the stack →</p><div class="language-yaml highlighter-rouge"><div class="code-header"> <span data-label-text="YAML"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
</pre><td class="rouge-code"><pre><span class="na">version</span><span class="pi">:</span> <span class="s2">"</span><span class="s">3.8"</span>
<span class="na">services</span><span class="pi">:</span>
  <span class="na">nginxproxymanager</span><span class="pi">:</span>
    <span class="na">image</span><span class="pi">:</span> <span class="s">jc21/nginx-proxy-manager:latest</span>
    <span class="na">restart</span><span class="pi">:</span> <span class="s">unless-stopped</span>
    <span class="na">ports</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">8080:80</span>
      <span class="pi">-</span> <span class="s">443:443</span>
      <span class="pi">-</span> <span class="s">81:81</span>
    <span class="na">environment</span><span class="pi">:</span>
      <span class="na">DISABLE_IPV6</span><span class="pi">:</span> <span class="s2">"</span><span class="s">true"</span>
    <span class="na">volumes</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">/home/tanq/npm/data:/data</span>
      <span class="pi">-</span> <span class="s">/home/tanq/npm/letsencrypt:/etc/letsencrypt</span>
    <span class="na">networks</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">npmnet</span>
<span class="na">networks</span><span class="pi">:</span>
  <span class="na">npmnet</span><span class="pi">:</span>
    <span class="na">name</span><span class="pi">:</span> <span class="s">npmnet</span>
</pre></table></code></div></div><p>After this stack is deployed, the control plane is available at <code class="language-plaintext highlighter-rouge">IP:81</code>, where default credentials are <code class="language-plaintext highlighter-rouge">admin@example.com:changeme</code>. It auto-prompts to change the password and set an email.</p><blockquote class="prompt-info"><p>The <code class="language-plaintext highlighter-rouge">npmnet</code> here is a new Docker network setup for NPM. We’ll use this to help route to our services without exposing ports unnecessarily. Unfortunately, that means modifying your existing stacks and redeploying all services.</p></blockquote><h3 id="setting-up-ssl-certificates"><span class="me-2">Setting up SSL Certificates</span><a href="#setting-up-ssl-certificates" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>The next step is to setup a Cloudflare domain with NPM and prove ownership. This can be done via a DNS-01 verification. To do this, go to the domain and create an API token. Select a custom token there and then name it <code class="language-plaintext highlighter-rouge">Homelab SSL</code>. Set the permissions to <code class="language-plaintext highlighter-rouge">Zone, DNS, Edit</code> and create the token.</p><p>After this, go to SSL Certificates on the NPM control plane UI and write the domain names as <code class="language-plaintext highlighter-rouge">revp.home</code> and <code class="language-plaintext highlighter-rouge">*.revp.home</code>. This will create a wildcard certificate, so all subdomains will support SSL. Select the DNS provider in the control plane and add the token. NPM will trigger the DNS-01 verification and handle certificate creation.</p><blockquote class="prompt-tip"><p>We use DNS-01 verification instead of HTTP, because this is what allows for the wildcard certificate.</p></blockquote><h3 id="linking-services-to-npm"><span class="me-2">Linking Services to NPM</span><a href="#linking-services-to-npm" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>With NPM setup, the other services need to be configured to use the same Docker network (<code class="language-plaintext highlighter-rouge">npmnet</code>). To do this, we add the network to an existing stack and remove the exposed ports from the compose definition. As an example, an updated stack for <strong>Vikunja</strong> would look like this →</p><div class="language-yaml highlighter-rouge"><div class="code-header"> <span data-label-text="YAML"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre><td class="rouge-code"><pre><span class="na">version</span><span class="pi">:</span> <span class="s2">"</span><span class="s">3.8"</span>
<span class="na">services</span><span class="pi">:</span>
  <span class="na">vikunja</span><span class="pi">:</span>
    <span class="na">image</span><span class="pi">:</span> <span class="s">vikunja/vikunja</span>
    <span class="na">container_name</span><span class="pi">:</span> <span class="s">vikunja</span>
    <span class="na">volumes</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">/home/tanq/vikunja/db:/db</span>
      <span class="pi">-</span> <span class="s">/home/tanq/vikunja/files:/app/vikunja/files</span>
      <span class="pi">-</span> <span class="s">/path/to/config/on/host.yml:/app/vikunja/config.yml:ro</span>
    <span class="na">networks</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">npmnet</span>
<span class="na">networks</span><span class="pi">:</span>
  <span class="na">npmnet</span><span class="pi">:</span>
    <span class="na">external</span><span class="pi">:</span> <span class="kc">true</span>
</pre></table></code></div></div><p>The <code class="language-plaintext highlighter-rouge">external: true</code> being added here signifies the use of a network defined for another container i.e., a pre-existing network.</p><blockquote class="prompt-tip"><p>Remember to take a note of the exposed ports in the previous definition file, so they can be referred to inside NPM and you don’t have to hunt for what port the service usually runs on.</p></blockquote><p>Now, each service can be added to NPM control plane as a new proxy host using the service container name (as defined in the stack) as the hostname and the service’s operating port for the port.</p><p>After this step, your service should be reachable via the domain, example - <code class="language-plaintext highlighter-rouge">vikunja.revp.home</code> and present a valid SSL certificate. At this point, Cloudflare tunnels can also be configured properly to point to the same addresses as setup in the NPM control plane (like <code class="language-plaintext highlighter-rouge">http(s)://container_name:service_port</code>). Additionally, keep in mind that the container running the Cloudflare connector agent should also use the same network as the services so it can route to those containers.</p><blockquote class="prompt-info"><p>Actually, it won’t be reachable from the internal network just yet because <code class="language-plaintext highlighter-rouge">revp.home</code> routes to Cloudflare instead of the home server. Read on to fix that.</p></blockquote><h3 id="finishing-off-domain-setup"><span class="me-2">Finishing off Domain Setup</span><a href="#finishing-off-domain-setup" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>To allow NPM to be reached via the same domain locally, use a DNS sinkhole to rewrite requests to the domain. That way all local network requests to <code class="language-plaintext highlighter-rouge">revp.home</code> will be routed to the IP of the server hosting the homelab. As an example, setting this up in AdGuard Home includes clicking on <code class="language-plaintext highlighter-rouge">Filters</code> and then <code class="language-plaintext highlighter-rouge">DNS Rewrites</code>. Here, you should add two routes →</p><ul><li><code class="language-plaintext highlighter-rouge">*.revp.home</code> pointing to your NPM server IP (like 192.168.99.44)<li><code class="language-plaintext highlighter-rouge">revp.home</code> pointing to your NPM server IP (like 192.168.99.44)</ul><blockquote class="prompt-tip"><p>It’s always a good idea to set your server to a static IP.</p></blockquote><h2 id="fin"><span class="me-2">Fin</span><a href="#fin" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>With NPM and Cloudflare Tunnels, you can ensure your homelab services are reachable both internally and externally, with authentication enforced for external connections, and SSL enforced and validated everywhere.</p><h2 id="resources"><span class="me-2">Resources</span><a href="#resources" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><ul><li><a href="https://www.cloudflare.com/learning/cdn/glossary/reverse-proxy/">CloudFlare - Reverse Proxy</a><li><a href="https://nginxproxymanager.com/">Nginx Proxy Manager</a><li><a href="https://caddyserver.com/">Caddy</a><li><a href="https://developers.cloudflare.com/cloudflare-one/connections/connect-networks/">Cloudflare Tunnels</a></ul></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw me-1"></i> <a href="/blog/categories/home-server/">Home Server</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw me-1"></i> <a href="/blog/tags/reverse-proxy/" class="post-tag no-text-decoration" >reverse-proxy</a> <a href="/blog/tags/nginx-proxy-manager/" class="post-tag no-text-decoration" >nginx-proxy-manager</a> <a href="/blog/tags/cloudflare-tunnel/" class="post-tag no-text-decoration" >cloudflare-tunnel</a> <a href="/blog/tags/home-lab/" class="post-tag no-text-decoration" >home-lab</a></div><div class=" post-tail-bottom d-flex justify-content-between align-items-center mt-5 pb-2 " ><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper d-flex align-items-center"> <span class="share-label text-muted">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Reverse%20Proxy%20in%20Home%20Lab%20-%20Tanishq%20Rupaal&url=https%3A%2F%2Ftanishq.page%2Fblog%2Fposts%2Fhomelab-npm%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Twitter" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Reverse%20Proxy%20in%20Home%20Lab%20-%20Tanishq%20Rupaal&u=https%3A%2F%2Ftanishq.page%2Fblog%2Fposts%2Fhomelab-npm%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Facebook" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https%3A%2F%2Ftanishq.page%2Fblog%2Fposts%2Fhomelab-npm%2F&text=Reverse%20Proxy%20in%20Home%20Lab%20-%20Tanishq%20Rupaal" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Telegram" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <a href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Ftanishq.page%2Fblog%2Fposts%2Fhomelab-npm%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Linkedin" aria-label="Linkedin"> <i class="fa-fw fab fa-linkedin"></i> </a> <button id="copy-link" aria-label="Copy link" class="btn small" data-bs-toggle="tooltip" data-bs-placement="top" title="Copy link" data-title-succeed="Link copied successfully!" > <i class="fa-fw fas fa-link pe-none fs-6"></i> </button> </span></div></div></div></article></main><aside aria-label="Panel" id="panel-wrapper" class="col-xl-3 ps-2 text-muted"><div class="access"><section id="access-lastmod"><h2 class="panel-heading">Recently Updated</h2><ul class="content list-unstyled ps-0 pb-1 ms-1 mt-2"><li class="text-truncate lh-lg"> <a href="/blog/posts/go-tui/">Building a Terminal UI for Go CLI Tools</a><li class="text-truncate lh-lg"> <a href="/blog/posts/gha-notif/">Custom GitHub WebHook Notifications via GitHub Actions</a><li class="text-truncate lh-lg"> <a href="/blog/posts/homelab-npm/">Reverse Proxy in Home Lab</a><li class="text-truncate lh-lg"> <a href="/blog/posts/go-coding/">The Way to Go(lang)</a><li class="text-truncate lh-lg"> <a href="/blog/posts/homelab-budgetlord/">Expense Tracking in Home Lab</a></ul></section><section><h2 class="panel-heading">Trending Tags</h2><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/blog/tags/home-lab/">home-lab</a> <a class="post-tag btn btn-outline-primary" href="/blog/tags/lab/">lab</a> <a class="post-tag btn btn-outline-primary" href="/blog/tags/productivity/">productivity</a> <a class="post-tag btn btn-outline-primary" href="/blog/tags/offsec-proving-grounds/">offsec-proving-grounds</a> <a class="post-tag btn btn-outline-primary" href="/blog/tags/oscp/">oscp</a> <a class="post-tag btn btn-outline-primary" href="/blog/tags/security/">security</a> <a class="post-tag btn btn-outline-primary" href="/blog/tags/aws/">aws</a> <a class="post-tag btn btn-outline-primary" href="/blog/tags/container/">container</a> <a class="post-tag btn btn-outline-primary" href="/blog/tags/programming/">programming</a> <a class="post-tag btn btn-outline-primary" href="/blog/tags/docker/">docker</a></div></section></div><div class="toc-border-cover z-3"></div><section id="toc-wrapper" class="invisible position-sticky ps-0 pe-4 pb-4"><h2 class="panel-heading ps-3 pb-2 mb-0">Contents</h2><nav id="toc"></nav></section></aside></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 px-md-4"><aside id="related-posts" aria-labelledby="related-label"><h3 class="mb-4" id="related-label">Further Reading</h3><nav class="row row-cols-1 row-cols-md-2 row-cols-xl-3 g-4 mb-4"><article class="col"> <a href="/blog/posts/homelab-filebrowser/" class="post-preview card h-100"><div class="card-body"> <time data-ts="1684100460" data-df="ll" > May 14, 2023 </time><h4 class="pt-0 my-2">FileBrowser in Home Lab</h4><div class="text-muted"><p>FileBrowser is a file management service that can run within the local network through a browser. It can be thought of as a “create your own cloud storage” solution, with the cloud being the self-h...</p></div></div></a></article><article class="col"> <a href="/blog/posts/homelab-homepage/" class="post-preview card h-100"><div class="card-body"> <time data-ts="1683507180" data-df="ll" > May 7, 2023 </time><h4 class="pt-0 my-2">Homepage Dashboard in Home Lab</h4><div class="text-muted"><p>Homepage is a slick-looking dashboard that I use in my home lab. Out of at least 10 other dashboard applications I tried, Homepage is the only one that struck the right balance of elegance, simplic...</p></div></div></a></article><article class="col"> <a href="/blog/posts/homelab-adguard/" class="post-preview card h-100"><div class="card-body"> <time data-ts="1683476520" data-df="ll" > May 7, 2023 </time><h4 class="pt-0 my-2">AdGuard in Home Lab</h4><div class="text-muted"><p>AdGuard Home is a network-wide DNS sink hole, like PiHole. Like most services, this can be deployed as a container, which is the easiest way to set it up. Deployment AdGuard provides a wiki to he...</p></div></div></a></article></nav></aside><nav class="post-navigation d-flex justify-content-between" aria-label="Post Navigation"> <a href="/blog/posts/go-coding/" class="btn btn-outline-primary" aria-label="Older" ><p>The Way to Go(lang)</p></a> <a href="/blog/posts/gha-notif/" class="btn btn-outline-primary" aria-label="Newer" ><p>Custom GitHub WebHook Notifications via GitHub Actions</p></a></nav><footer aria-label="Site Info" class=" d-flex flex-column justify-content-center text-muted flex-lg-row justify-content-lg-between align-items-lg-center pb-lg-3 " ><p>© <time>2025</time> <a href="https://twitter.com/etheriosking">Tanishq Rupaal</a>. <span data-bs-toggle="tooltip" data-bs-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author." >Some rights reserved.</span></p><p>Using the <a data-bs-toggle="tooltip" data-bs-placement="top" title="v7.2.4" href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener" >Chirpy</a> theme for <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a>.</p></footer></div></div><div id="search-result-wrapper" class="d-flex justify-content-center d-none"><div class="col-11 content"><div id="search-hints"><section><h2 class="panel-heading">Trending Tags</h2><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/blog/tags/home-lab/">home-lab</a> <a class="post-tag btn btn-outline-primary" href="/blog/tags/lab/">lab</a> <a class="post-tag btn btn-outline-primary" href="/blog/tags/productivity/">productivity</a> <a class="post-tag btn btn-outline-primary" href="/blog/tags/offsec-proving-grounds/">offsec-proving-grounds</a> <a class="post-tag btn btn-outline-primary" href="/blog/tags/oscp/">oscp</a> <a class="post-tag btn btn-outline-primary" href="/blog/tags/security/">security</a> <a class="post-tag btn btn-outline-primary" href="/blog/tags/aws/">aws</a> <a class="post-tag btn btn-outline-primary" href="/blog/tags/container/">container</a> <a class="post-tag btn btn-outline-primary" href="/blog/tags/programming/">programming</a> <a class="post-tag btn btn-outline-primary" href="/blog/tags/docker/">docker</a></div></section></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><aside aria-label="Scroll to Top"> <button id="back-to-top" type="button" class="btn btn-lg btn-box-shadow"> <i class="fas fa-angle-up"></i> </button></aside></div><div id="mask" class="d-none position-fixed w-100 h-100 z-1"></div><aside id="notification" class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-bs-animation="true" data-bs-autohide="false" ><div class="toast-header"> <button type="button" class="btn-close ms-auto" data-bs-dismiss="toast" aria-label="Close" ></button></div><div class="toast-body text-center pt-0"><p class="px-2 mb-3">A new version of content is available.</p><button type="button" class="btn btn-primary" aria-label="Update"> Update </button></div></aside><script> document.addEventListener('DOMContentLoaded', () => { SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/blog/assets/js/data/search.json', searchResultTemplate: '<article class="px-1 px-sm-2 px-lg-4 px-xl-0"><header><h2><a href="{url}">{title}</a></h2><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div></header><p>{snippet}</p></article>', noResultsText: '<p class="mt-5">Oops! No results found.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="me-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); }); </script>
