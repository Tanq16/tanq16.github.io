<!doctype html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="theme-color" media="(prefers-color-scheme: light)" content="#f7f7f7"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1b1b1e"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><meta name="viewport" content="width=device-width, user-scalable=no initial-scale=1, shrink-to-fit=no, viewport-fit=cover" ><meta name="generator" content="Jekyll v4.3.4" /><meta property="og:title" content="Expense Tracking in Home Lab" /><meta property="og:locale" content="en" /><meta name="description" content="Whats and Whys" /><meta property="og:description" content="Whats and Whys" /><link rel="canonical" href="https://tanishq.page/blog/posts/homelab-budgetlord/" /><meta property="og:url" content="https://tanishq.page/blog/posts/homelab-budgetlord/" /><meta property="og:site_name" content="Tanishq Rupaal" /><meta property="og:image" content="https://tanishq.page/blog/assets/img/covers/homelab-cover.jpeg" /><meta property="og:image:alt" content="HomeLab Artwork" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2024-12-14T09:10:00-05:00" /><meta name="twitter:card" content="summary_large_image" /><meta property="twitter:image" content="https://tanishq.page/blog/assets/img/covers/homelab-cover.jpeg" /><meta name="twitter:image:alt" content="HomeLab Artwork" /><meta property="twitter:title" content="Expense Tracking in Home Lab" /><meta name="twitter:site" content="@etheriosking" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2024-12-14T09:10:00-05:00","datePublished":"2024-12-14T09:10:00-05:00","description":"Whats and Whys","headline":"Expense Tracking in Home Lab","image":{"alt":"HomeLab Artwork","url":"https://tanishq.page/blog/assets/img/covers/homelab-cover.jpeg","@type":"imageObject"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://tanishq.page/blog/posts/homelab-budgetlord/"},"url":"https://tanishq.page/blog/posts/homelab-budgetlord/"}</script><title>Expense Tracking in Home Lab | Tanishq Rupaal</title><link rel="apple-touch-icon" sizes="180x180" href="/blog/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/blog/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/blog/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/blog/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/blog/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Tanishq Rupaal"><meta name="application-name" content="Tanishq Rupaal"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/blog/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="/blog/assets/css/jekyll-theme-chirpy.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.7.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tocbot@4.32.2/dist/tocbot.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/glightbox@3.3.0/dist/css/glightbox.min.css"> <script src="/blog/assets/js/dist/theme.min.js"></script> <script defer src="https://cdn.jsdelivr.net/combine/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js,npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.umd.min.js,npm/glightbox@3.3.0/dist/js/glightbox.min.js,npm/clipboard@2.0.11/dist/clipboard.min.js,npm/dayjs@1.11.13/dayjs.min.js,npm/dayjs@1.11.13/locale/en.js,npm/dayjs@1.11.13/plugin/relativeTime.js,npm/dayjs@1.11.13/plugin/localizedFormat.js,npm/tocbot@4.32.2/dist/tocbot.min.js"></script> <script defer src="/blog/assets/js/dist/post.min.js"></script> <script defer src="/blog/app.min.js?baseurl=/blog&register=true" ></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-B88HEPZBVJ"></script> <script> document.addEventListener('DOMContentLoaded', () => { window.dataLayer = window.dataLayer || []; function gtag() { dataLayer.push(arguments); } gtag('js', new Date()); gtag('config', 'G-B88HEPZBVJ'); }); </script><body><aside aria-label="Sidebar" id="sidebar" class="d-flex flex-column align-items-end"><header class="profile-wrapper"> <a href="/blog/" id="avatar" class="rounded-circle"><img src="/blog/assets/Abstract.png" width="112" height="112" alt="avatar" onerror="this.style.display='none'"></a> <a class="site-title d-block" href="/blog/">Tanishq Rupaal</a><p class="site-subtitle fst-italic mb-0">Cybersecurity Professional</p></header><nav class="flex-column flex-grow-1 w-100 ps-0"><ul class="nav"><li class="nav-item"> <a href="/blog/" class="nav-link"> <i class="fa-fw fas fa-home"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/blog/categories/" class="nav-link"> <i class="fa-fw fas fa-stream"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/blog/archives/" class="nav-link"> <i class="fa-fw fas fa-archive"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/blog/tags/" class="nav-link"> <i class="fa-fw fas fa-tags"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/blog/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle"></i> <span>ABOUT</span> </a></ul></nav><div class="sidebar-bottom d-flex flex-wrap align-items-center w-100"> <button type="button" class="btn btn-link nav-link" aria-label="Switch Mode" id="mode-toggle"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/tanq16" aria-label="github" target="_blank" rel="noopener noreferrer" > <i class="fab fa-github"></i> </a> <a href="https://twitter.com/etheriosking" aria-label="twitter" target="_blank" rel="noopener noreferrer" > <i class="fab fa-twitter"></i> </a> <a href="javascript:location.href = 'mailto:' + ['dragonking47','proton.me'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="https://linkedin.com/in/tanishqrupaal" aria-label="linkedin" target="_blank" rel="noopener noreferrer" > <i class="fab fa-linkedin"></i> </a></div></aside><div id="main-wrapper" class="d-flex justify-content-center"><div class="container d-flex flex-column px-xxl-5"><header id="topbar-wrapper" aria-label="Top Bar"><div id="topbar" class="d-flex align-items-center justify-content-between px-lg-3 h-100" ><nav id="breadcrumb" aria-label="Breadcrumb"> <span> <a href="/blog/">Home</a> </span> <span>Expense Tracking in Home Lab</span></nav><button type="button" id="sidebar-trigger" class="btn btn-link"> <i class="fas fa-bars fa-fw"></i> </button><div id="topbar-title"> Post</div><button type="button" id="search-trigger" class="btn btn-link"> <i class="fas fa-search fa-fw"></i> </button> <search id="search" class="align-items-center ms-3 ms-lg-0"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..." > </search> <button type="button" class="btn btn-link text-decoration-none" id="search-cancel">Cancel</button></div></header><div class="row flex-grow-1"><main aria-label="Main Content" class="col-12 col-lg-11 col-xl-9 px-md-4"><article class="px-1" data-toc="true"><header><h1 data-toc-skip>Expense Tracking in Home Lab</h1><div class="post-meta text-muted"> <span> Posted <time data-ts="1734185400" data-df="ll" data-bs-toggle="tooltip" data-bs-placement="bottom" > Dec 14, 2024 </time> </span><div class="mt-3 mb-3"> <a href="/blog/assets/img/covers/homelab-cover.jpeg" class="popup img-link preview-img shimmer"><img src="/blog/assets/img/covers/homelab-cover.jpeg" alt="HomeLab Artwork" width="1200" height="630" loading="lazy"></a><figcaption class="text-center pt-2 pb-2">HomeLab Artwork</figcaption></div><div class="d-flex justify-content-between"> <span> By <em> <a href="https://twitter.com/etheriosking">Tanishq Rupaal</a> </em> </span><div> <span class="readtime" data-bs-toggle="tooltip" data-bs-placement="bottom" title="1114 words" > <em>6 min</em> read</span></div></div></div></header><div id="toc-bar" class="d-flex align-items-center justify-content-between invisible"> <span class="label text-truncate">Expense Tracking in Home Lab</span> <button type="button" class="toc-trigger btn me-1"> <i class="fa-solid fa-list-ul fa-fw"></i> </button></div><button id="toc-solo-trigger" type="button" class="toc-trigger btn btn-outline-secondary btn-sm"> <span class="label ps-2 pe-1">Contents</span> <i class="fa-solid fa-angle-right fa-fw"></i> </button> <dialog id="toc-popup" class="p-0"><div class="header d-flex flex-row align-items-center justify-content-between"><div class="label text-truncate py-2 ms-4">Expense Tracking in Home Lab</div><button id="toc-popup-close" type="button" class="btn mx-1 my-1 opacity-75"> <i class="fas fa-close"></i> </button></div><div id="toc-popup-content" class="px-4 py-3 pb-4"></div></dialog><div class="content"><h2 id="whats-and-whys"><span class="me-2">Whats and Whys</span><a href="#whats-and-whys" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>I wrote a tool called <a href="https://github.com/Tanq16/budgetlord">BudgetLord</a> for one straightforward reason - to track expenses. There are <code class="language-plaintext highlighter-rouge">so</code> <code class="language-plaintext highlighter-rouge">So</code> <code class="language-plaintext highlighter-rouge">sO</code> <code class="language-plaintext highlighter-rouge">SO</code> many tools out there that do the same. And they do it so well, with so many features. What I wrote is very simple, so why not just use one of the existing tools? I was using one too! I preferred Spendee for a while but migrated from it. I also looked at Cashew, but still migrated away from it. I wanted something for my home server and something that does exactly what I want.</p><p>BudgetLord is primarily a simple API-based service to which I can add data using HTTP requests. I wanted data addition to be very quick, so HTTP requests allow me to add data through a Siri Shortcut on my iPhone, which also doubles as a quick and friendly UI to add data. I can also create a custom pie chart the way I want to. Lastly, I wanted to do it without adding unnecessary details (unless needed). This is because, generally, the analysis that matters to me needs information on what I’m spending on and when. For example, “<em>I spent 200$ last week on food, but a total of 300$ in the last month on food</em>” is more important than “<em>I had cheesecake factory 3 times in the last week</em>”. This means skipping the notes when needed, wallet type, budget book, etc., and sticking to 2 main things - <code class="language-plaintext highlighter-rouge">category</code> and <code class="language-plaintext highlighter-rouge">amount</code>. I also don’t need to maintain my entire net worth on an app by tracking income because income trickles in regularly, and I can monitor that through my banking apps and emails. Monitoring trends rather than specifics is essential, so I decided to store data in JSON to make it easily readable on a monthly basis.</p><p>Another reason for getting out of third-party apps is to reduce tracking and service vendor lock-in. I appreciate the hard work of app developers and hope they get funded for their work, but at the same time, if I can write code in some capacity, why commit to another app unnecessarily when it’s more interesting this way? Also, The vendor locking thing shows up in random places for different apps; for example, I couldn’t export <code class="language-plaintext highlighter-rouge">my</code> expense data on a third-party app that was older than a year without a premium subscription….. 🤔 ???? it’s my data……!!! 🙄 You can gatekeep features but not my own data!! Alas, here’s my app.</p><h2 id="deployment"><span class="me-2">Deployment</span><a href="#deployment" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Make a persistence directory on your homelab machine →</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">mkdir</span> <span class="nt">-p</span> <span class="nv">$HOME</span>/budgetlord_data
</pre></table></code></div></div><p>Then run the application through this Docker command →</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre>docker run <span class="nt">-d</span> <span class="se">\</span>
  <span class="nt">--name</span> budgetlord <span class="se">\</span>
  <span class="nt">-p</span> 8080:8080 <span class="se">\</span>
  <span class="nt">-v</span> <span class="nv">$HOME</span>/budgetlord_data:/app/data <span class="se">\</span>
  tanq16/budgetlord:main
<span class="c"># use tag :main_arm for ARM64 image</span>
</pre></table></code></div></div><p>After this, the container will be deployed at <code class="language-plaintext highlighter-rouge">localhost:8080</code>. A better way to deploy it is using docker-compose either directly or through Portainer/Dockge/etc. →</p><div class="language-yaml highlighter-rouge"><div class="code-header"> <span data-label-text="YAML"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre><span class="na">services</span><span class="pi">:</span>
  <span class="na">BudgetLord</span><span class="pi">:</span>
    <span class="na">image</span><span class="pi">:</span> <span class="s">tanq16/BudgetLord:main</span>
    <span class="na">container_name</span><span class="pi">:</span> <span class="s">BudgetLord</span>
    <span class="na">volumes</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">/home/username/budgetlord_data:/expense-data</span> <span class="c1"># replace with correct path</span>
    <span class="na">ports</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">5002:8080</span>
</pre></table></code></div></div><p>Lastly, you could also download the releases from the <a href="https://github.com/Tanq16/BudgetLord/releases">project releases</a> to run the app as a binary (available for Linux, MacOS, and Windows for both ARM64 and x86_64).</p><h2 id="backing-up"><span class="me-2">Backing Up</span><a href="#backing-up" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Backups are another piece of the puzzle. I’m doing manual backups for my home lab server, so this data is included automatically. Still, you can easily set up <code class="language-plaintext highlighter-rouge">rsync</code> for backing up to local NAS or other more sophisticated backup utilities triggered via cron jobs. In the spirit of automating everything, you could also use Dropbox API and Python in a script triggered by cron jobs to make a tarball from the expense data and back that single file to the cloud (I have yet to attempt this one).</p><h2 id="migration"><span class="me-2">Migration</span><a href="#migration" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>I migrated from Spendee after exporting a CSV from the service. Custom scripts are required for different types of exports. For Spendee, I used this code to convert my expense data to the format I needed →</p><div class="language-python highlighter-rouge"><div class="code-header"> <span data-label-text="Python"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
</pre><td class="rouge-code"><pre><span class="kn">import</span> <span class="n">csv</span>
<span class="kn">import</span> <span class="n">json</span>
<span class="kn">from</span> <span class="n">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>

<span class="c1"># Define a dictionary to map category names to actual values
</span><span class="n">category_mapping</span> <span class="o">=</span> <span class="p">{</span>
    <span class="sh">"</span><span class="s">Credit Card Offer</span><span class="sh">"</span><span class="p">:</span> <span class="sh">"</span><span class="s">ignore</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">Food &amp; Drink</span><span class="sh">"</span><span class="p">:</span> <span class="sh">"</span><span class="s">food</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">Miscellaneous </span><span class="sh">"</span><span class="p">:</span> <span class="sh">"</span><span class="s">personal</span><span class="sh">"</span><span class="p">,</span>
    <span class="sh">"</span><span class="s">Car/Cab</span><span class="sh">"</span><span class="p">:</span> <span class="sh">"</span><span class="s">travel</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">Family</span><span class="sh">"</span><span class="p">:</span> <span class="sh">"</span><span class="s">family</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">Groceries</span><span class="sh">"</span><span class="p">:</span> <span class="sh">"</span><span class="s">groceries</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">Healthcare</span><span class="sh">"</span><span class="p">:</span> <span class="sh">"</span><span class="s">personal</span><span class="sh">"</span><span class="p">,</span>
    <span class="sh">"</span><span class="s">Home</span><span class="sh">"</span><span class="p">:</span> <span class="sh">"</span><span class="s">home</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">Investments</span><span class="sh">"</span><span class="p">:</span> <span class="sh">"</span><span class="s">investing</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">Miscellaneous</span><span class="sh">"</span><span class="p">:</span> <span class="sh">"</span><span class="s">personal</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">Personal</span><span class="sh">"</span><span class="p">:</span> <span class="sh">"</span><span class="s">personal</span><span class="sh">"</span><span class="p">,</span>
    <span class="sh">"</span><span class="s">Refunds</span><span class="sh">"</span><span class="p">:</span> <span class="sh">"</span><span class="s">ignore</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">Salary</span><span class="sh">"</span><span class="p">:</span> <span class="sh">"</span><span class="s">ignore</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">Shopping</span><span class="sh">"</span><span class="p">:</span> <span class="sh">"</span><span class="s">shopping</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">Subscriptions</span><span class="sh">"</span><span class="p">:</span> <span class="sh">"</span><span class="s">subscriptions</span><span class="sh">"</span><span class="p">,</span>
    <span class="sh">"</span><span class="s">Transport</span><span class="sh">"</span><span class="p">:</span> <span class="sh">"</span><span class="s">travel</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">Travel</span><span class="sh">"</span><span class="p">:</span> <span class="sh">"</span><span class="s">travel</span><span class="sh">"</span>
<span class="p">}</span>

<span class="k">def</span> <span class="nf">preprocess_data</span><span class="p">(</span><span class="n">row</span><span class="p">):</span>
    <span class="n">amount</span> <span class="o">=</span> <span class="o">-</span><span class="nf">float</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="sh">"</span><span class="s">Amount</span><span class="sh">"</span><span class="p">])</span>
    <span class="n">category</span> <span class="o">=</span> <span class="n">category_mapping</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="sh">"</span><span class="s">Category name</span><span class="sh">"</span><span class="p">],</span> <span class="n">row</span><span class="p">[</span><span class="sh">"</span><span class="s">Category name</span><span class="sh">"</span><span class="p">].</span><span class="nf">lower</span><span class="p">())</span>
    <span class="n">reduced_date</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">.</span><span class="nf">strptime</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="sh">"</span><span class="s">Date</span><span class="sh">"</span><span class="p">],</span> <span class="sh">"</span><span class="s">%Y-%m-%dT%H:%M:%S+00:00</span><span class="sh">"</span><span class="p">).</span><span class="nf">strftime</span><span class="p">(</span><span class="sh">"</span><span class="s">%d-%m-%Y</span><span class="sh">"</span><span class="p">)</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="sh">"</span><span class="s">date</span><span class="sh">"</span><span class="p">:</span> <span class="n">reduced_date</span><span class="p">,</span>
        <span class="sh">"</span><span class="s">category</span><span class="sh">"</span><span class="p">:</span> <span class="n">category</span><span class="p">,</span>
        <span class="sh">"</span><span class="s">amount</span><span class="sh">"</span><span class="p">:</span> <span class="n">amount</span><span class="p">,</span>
        <span class="sh">"</span><span class="s">note</span><span class="sh">"</span><span class="p">:</span> <span class="n">row</span><span class="p">[</span><span class="sh">"</span><span class="s">Note</span><span class="sh">"</span><span class="p">]</span>
    <span class="p">}</span>

<span class="n">final</span> <span class="o">=</span> <span class="p">{}</span>
<span class="k">with</span> <span class="nf">open</span><span class="p">(</span><span class="sh">'</span><span class="s">transactions.csv</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">r</span><span class="sh">'</span><span class="p">)</span> <span class="k">as</span> <span class="n">csvfile</span><span class="p">:</span>
    <span class="n">reader</span> <span class="o">=</span> <span class="n">csv</span><span class="p">.</span><span class="nc">DictReader</span><span class="p">(</span><span class="n">csvfile</span><span class="p">,</span> <span class="n">delimiter</span><span class="o">=</span><span class="sh">'</span><span class="s">,</span><span class="sh">'</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">reader</span><span class="p">:</span>
        <span class="n">processed_data</span> <span class="o">=</span> <span class="nf">preprocess_data</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>
        <span class="n">month_year</span> <span class="o">=</span> <span class="n">processed_data</span><span class="p">[</span><span class="sh">"</span><span class="s">date</span><span class="sh">"</span><span class="p">][</span><span class="mi">3</span><span class="p">:</span><span class="mi">10</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">processed_data</span><span class="p">[</span><span class="sh">"</span><span class="s">category</span><span class="sh">"</span><span class="p">]</span> <span class="o">==</span> <span class="sh">"</span><span class="s">ignore</span><span class="sh">"</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="n">processed_data</span><span class="p">[</span><span class="sh">"</span><span class="s">amount</span><span class="sh">"</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">month_year</span> <span class="ow">in</span> <span class="n">final</span><span class="p">:</span>
            <span class="n">final</span><span class="p">[</span><span class="n">month_year</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">final</span><span class="p">[</span><span class="n">month_year</span><span class="p">].</span><span class="nf">append</span><span class="p">(</span><span class="n">processed_data</span><span class="p">)</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">final</span><span class="p">:</span>
    <span class="k">with</span> <span class="nf">open</span><span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="sh">"</span><span class="s">-expenses.json</span><span class="sh">"</span><span class="p">,</span> <span class="sh">'</span><span class="s">w</span><span class="sh">'</span><span class="p">)</span> <span class="k">as</span> <span class="n">jsonfile</span><span class="p">:</span>
        <span class="n">json</span><span class="p">.</span><span class="nf">dump</span><span class="p">(</span><span class="n">final</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">jsonfile</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
</pre></table></code></div></div><p>For any other platform, try to get CSV export ready and modify the fields directly in the CSV to match those of the above script or modify the script to match the export data.</p><h2 id="analysis-views"><span class="me-2">Analysis Views</span><a href="#analysis-views" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>The app presents two interfaces that automatically adapt to dark mode preferences →</p><p>Dashboard View →</p><ul><li>Interactive pie chart showing expense distribution<li>Custom legend with percentage breakdowns<li>Real-time category totals<li>Seamless month-to-month navigation</ul><p>Table View →</p><ul><li>Chronological expense listing<li>Quick category reference<li>Formatted currency display<li>Responsive mobile design<li>Expense deletion with confirmation</ul><p>Singular expenses can be deleted from the Table view for convenience.</p><h2 id="adding-data"><span class="me-2">Adding Data</span><a href="#adding-data" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>To add expense data to the application, use a cURL request like so →</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre>curl <span class="nt">-X</span> PUT http://localhost:8080/expense <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
<span class="nt">-d</span> <span class="s1">'{
    "name": "Groceries",
    "category": "Food",
    "amount": 75.50,
    "date": "2024-03-15T14:30:00Z"
}'</span>
</pre></table></code></div></div><p>The <code class="language-plaintext highlighter-rouge">budgetlord</code> can also be used as a client to add data by pointing it to the server like so →</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>budgetlord <span class="nt">-addr</span> <span class="s2">"192.168.1.13:8080"</span>
</pre></table></code></div></div><p>This will automatically set the time for you and ask the other details before making the HTTP request (abstracted).</p><h2 id="tips"><span class="me-2">Tips</span><a href="#tips" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>In addition to using the binary or cURL to add expenses, iPhones allow using Siri Shortcuts to make HTTP requests. A shortcut can be defined to add expenses easily, which is what I do too.</p><p>Lastly, the application can also be installed as a PWA (progressive web app), which also helps add an icon to smartphone home screens. This opens up the app easily to allow analysis as needed.</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw me-1"></i> <a href="/blog/categories/home-server/">Home Server</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw me-1"></i> <a href="/blog/tags/budgetlord/" class="post-tag no-text-decoration" >budgetlord</a> <a href="/blog/tags/expense-tracking/" class="post-tag no-text-decoration" >expense-tracking</a> <a href="/blog/tags/home-lab/" class="post-tag no-text-decoration" >home-lab</a></div><div class=" post-tail-bottom d-flex justify-content-between align-items-center mt-5 pb-2 " ><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper d-flex align-items-center"> <span class="share-label text-muted">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Expense%20Tracking%20in%20Home%20Lab%20-%20Tanishq%20Rupaal&url=https%3A%2F%2Ftanishq.page%2Fblog%2Fposts%2Fhomelab-budgetlord%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Twitter" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Expense%20Tracking%20in%20Home%20Lab%20-%20Tanishq%20Rupaal&u=https%3A%2F%2Ftanishq.page%2Fblog%2Fposts%2Fhomelab-budgetlord%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Facebook" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https%3A%2F%2Ftanishq.page%2Fblog%2Fposts%2Fhomelab-budgetlord%2F&text=Expense%20Tracking%20in%20Home%20Lab%20-%20Tanishq%20Rupaal" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Telegram" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <a href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Ftanishq.page%2Fblog%2Fposts%2Fhomelab-budgetlord%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Linkedin" aria-label="Linkedin"> <i class="fa-fw fab fa-linkedin"></i> </a> <button id="copy-link" aria-label="Copy link" class="btn small" data-bs-toggle="tooltip" data-bs-placement="top" title="Copy link" data-title-succeed="Link copied successfully!" > <i class="fa-fw fas fa-link pe-none fs-6"></i> </button> </span></div></div></div></article></main><aside aria-label="Panel" id="panel-wrapper" class="col-xl-3 ps-2 text-muted"><div class="access"><section id="access-lastmod"><h2 class="panel-heading">Recently Updated</h2><ul class="content list-unstyled ps-0 pb-1 ms-1 mt-2"><li class="text-truncate lh-lg"> <a href="/blog/posts/go-coding/">The Way to Go(lang)</a><li class="text-truncate lh-lg"> <a href="/blog/posts/homelab-budgetlord/">Expense Tracking in Home Lab</a><li class="text-truncate lh-lg"> <a href="/blog/posts/homelab-fusion/">Leantime in Home Lab</a><li class="text-truncate lh-lg"> <a href="/blog/posts/ai-rag/">Exploring RAG (Retrieval-Augmented Generation) and Talking to my Notes</a><li class="text-truncate lh-lg"> <a href="/blog/posts/cst-guide/">Containerized Security Toolkit - A Guide</a></ul></section><section><h2 class="panel-heading">Trending Tags</h2><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/blog/tags/home-lab/">home-lab</a> <a class="post-tag btn btn-outline-primary" href="/blog/tags/lab/">lab</a> <a class="post-tag btn btn-outline-primary" href="/blog/tags/productivity/">productivity</a> <a class="post-tag btn btn-outline-primary" href="/blog/tags/offsec-proving-grounds/">offsec-proving-grounds</a> <a class="post-tag btn btn-outline-primary" href="/blog/tags/oscp/">oscp</a> <a class="post-tag btn btn-outline-primary" href="/blog/tags/security/">security</a> <a class="post-tag btn btn-outline-primary" href="/blog/tags/aws/">aws</a> <a class="post-tag btn btn-outline-primary" href="/blog/tags/container/">container</a> <a class="post-tag btn btn-outline-primary" href="/blog/tags/docker/">docker</a> <a class="post-tag btn btn-outline-primary" href="/blog/tags/github/">github</a></div></section></div><div class="toc-border-cover z-3"></div><section id="toc-wrapper" class="invisible position-sticky ps-0 pe-4 pb-4"><h2 class="panel-heading ps-3 pb-2 mb-0">Contents</h2><nav id="toc"></nav></section></aside></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 px-md-4"><aside id="related-posts" aria-labelledby="related-label"><h3 class="mb-4" id="related-label">Further Reading</h3><nav class="row row-cols-1 row-cols-md-2 row-cols-xl-3 g-4 mb-4"><article class="col"> <a href="/blog/posts/homelab-filebrowser/" class="post-preview card h-100"><div class="card-body"> <time data-ts="1684100460" data-df="ll" > May 14, 2023 </time><h4 class="pt-0 my-2">FileBrowser in Home Lab</h4><div class="text-muted"><p>FileBrowser is a file management service that can run within the local network through a browser. It can be thought of as a “create your own cloud storage” solution, with the cloud being the self-h...</p></div></div></a></article><article class="col"> <a href="/blog/posts/homelab-homepage/" class="post-preview card h-100"><div class="card-body"> <time data-ts="1683507180" data-df="ll" > May 7, 2023 </time><h4 class="pt-0 my-2">Homepage Dashboard in Home Lab</h4><div class="text-muted"><p>Homepage is a slick-looking dashboard that I use in my home lab. Out of at least 10 other dashboard applications I tried, Homepage is the only one that struck the right balance of elegance, simplic...</p></div></div></a></article><article class="col"> <a href="/blog/posts/homelab-adguard/" class="post-preview card h-100"><div class="card-body"> <time data-ts="1683476520" data-df="ll" > May 7, 2023 </time><h4 class="pt-0 my-2">AdGuard in Home Lab</h4><div class="text-muted"><p>AdGuard Home is a network-wide DNS sink hole, like PiHole. Like most services, this can be deployed as a container, which is the easiest way to set it up. Deployment AdGuard provides a wiki to he...</p></div></div></a></article></nav></aside><nav class="post-navigation d-flex justify-content-between" aria-label="Post Navigation"> <a href="/blog/posts/homelab-fusion/" class="btn btn-outline-primary" aria-label="Older" ><p>Leantime in Home Lab</p></a> <a href="/blog/posts/go-coding/" class="btn btn-outline-primary" aria-label="Newer" ><p>The Way to Go(lang)</p></a></nav><footer aria-label="Site Info" class=" d-flex flex-column justify-content-center text-muted flex-lg-row justify-content-lg-between align-items-lg-center pb-lg-3 " ><p>© <time>2024</time> <a href="https://twitter.com/etheriosking">Tanishq Rupaal</a>. <span data-bs-toggle="tooltip" data-bs-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author." >Some rights reserved.</span></p><p>Using the <a data-bs-toggle="tooltip" data-bs-placement="top" title="v7.2.2" href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener" >Chirpy</a> theme for <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a>.</p></footer></div></div><div id="search-result-wrapper" class="d-flex justify-content-center d-none"><div class="col-11 content"><div id="search-hints"><section><h2 class="panel-heading">Trending Tags</h2><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/blog/tags/home-lab/">home-lab</a> <a class="post-tag btn btn-outline-primary" href="/blog/tags/lab/">lab</a> <a class="post-tag btn btn-outline-primary" href="/blog/tags/productivity/">productivity</a> <a class="post-tag btn btn-outline-primary" href="/blog/tags/offsec-proving-grounds/">offsec-proving-grounds</a> <a class="post-tag btn btn-outline-primary" href="/blog/tags/oscp/">oscp</a> <a class="post-tag btn btn-outline-primary" href="/blog/tags/security/">security</a> <a class="post-tag btn btn-outline-primary" href="/blog/tags/aws/">aws</a> <a class="post-tag btn btn-outline-primary" href="/blog/tags/container/">container</a> <a class="post-tag btn btn-outline-primary" href="/blog/tags/docker/">docker</a> <a class="post-tag btn btn-outline-primary" href="/blog/tags/github/">github</a></div></section></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><aside aria-label="Scroll to Top"> <button id="back-to-top" type="button" class="btn btn-lg btn-box-shadow"> <i class="fas fa-angle-up"></i> </button></aside></div><div id="mask" class="d-none position-fixed w-100 h-100 z-1"></div><aside id="notification" class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-bs-animation="true" data-bs-autohide="false" ><div class="toast-header"> <button type="button" class="btn-close ms-auto" data-bs-dismiss="toast" aria-label="Close" ></button></div><div class="toast-body text-center pt-0"><p class="px-2 mb-3">A new version of content is available.</p><button type="button" class="btn btn-primary" aria-label="Update"> Update </button></div></aside><script> document.addEventListener('DOMContentLoaded', () => { SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/blog/assets/js/data/search.json', searchResultTemplate: '<article class="px-1 px-sm-2 px-lg-4 px-xl-0"><header><h2><a href="{url}">{title}</a></h2><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div></header><p>{snippet}</p></article>', noResultsText: '<p class="mt-5">Oops! No results found.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="me-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); }); </script>
