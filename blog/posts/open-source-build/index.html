<!doctype html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="theme-color" media="(prefers-color-scheme: light)" content="#f7f7f7"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1b1b1e"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><meta name="viewport" content="width=device-width, user-scalable=no initial-scale=1, shrink-to-fit=no, viewport-fit=cover" ><meta name="generator" content="Jekyll v4.3.3" /><meta property="og:title" content="Introduction to Open Source Projects and CMake" /><meta property="og:locale" content="en" /><meta name="description" content="Open Source Projects" /><meta property="og:description" content="Open Source Projects" /><link rel="canonical" href="https://tanishq.page/blog/posts/open-source-build/" /><meta property="og:url" content="https://tanishq.page/blog/posts/open-source-build/" /><meta property="og:site_name" content="Tanishq Rupaal" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2021-06-15T02:00:00-05:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Introduction to Open Source Projects and CMake" /><meta name="twitter:site" content="@etheriosking" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2021-06-15T02:00:00-05:00","datePublished":"2021-06-15T02:00:00-05:00","description":"Open Source Projects","headline":"Introduction to Open Source Projects and CMake","mainEntityOfPage":{"@type":"WebPage","@id":"https://tanishq.page/blog/posts/open-source-build/"},"url":"https://tanishq.page/blog/posts/open-source-build/"}</script><title>Introduction to Open Source Projects and CMake | Tanishq Rupaal</title><link rel="apple-touch-icon" sizes="180x180" href="/blog/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/blog/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/blog/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/blog/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/blog/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Tanishq Rupaal"><meta name="application-name" content="Tanishq Rupaal"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/blog/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.1/css/all.min.css"><link rel="stylesheet" href="/blog/assets/css/jekyll-theme-chirpy.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tocbot@4.25.0/dist/tocbot.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return 'mode'; } static get MODE_ATTR() { return 'data-mode'; } static get DARK_MODE() { return 'dark'; } static get LIGHT_MODE() { return 'light'; } static get ID() { return 'mode-toggle'; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener('change', () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia('(prefers-color-scheme: dark)'); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { document.documentElement.setAttribute(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { document.documentElement.setAttribute(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { document.documentElement.removeAttribute(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage( { direction: ModeToggle.ID, message: this.modeStatus }, '*' ); } flipMode() { if (this.hasMode) { if (this.isSysDarkPrefer) { if (this.isLightMode) { this.clearMode(); } else { this.setLight(); } } else { if (this.isDarkMode) { this.clearMode(); } else { this.setDark(); } } } else { if (this.isSysDarkPrefer) { this.setLight(); } else { this.setDark(); } } this.notify(); } /* flipMode() */ } /* ModeToggle */ const modeToggle = new ModeToggle(); </script><body><aside aria-label="Sidebar" id="sidebar" class="d-flex flex-column align-items-end"><header class="profile-wrapper"> <a href="/blog/" id="avatar" class="rounded-circle"><img src="/blog/assets/Abstract.png" width="112" height="112" alt="avatar" onerror="this.style.display='none'"></a><h1 class="site-title"> <a href="/blog/">Tanishq Rupaal</a></h1><p class="site-subtitle fst-italic mb-0">Cybersecurity Professional</p></header><nav class="flex-column flex-grow-1 w-100 ps-0"><ul class="nav"><li class="nav-item"> <a href="/blog/" class="nav-link"> <i class="fa-fw fas fa-home"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/blog/categories/" class="nav-link"> <i class="fa-fw fas fa-stream"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/blog/archives/" class="nav-link"> <i class="fa-fw fas fa-archive"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/blog/tags/" class="nav-link"> <i class="fa-fw fas fa-tag"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/blog/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle"></i> <span>ABOUT</span> </a></ul></nav><div class="sidebar-bottom d-flex flex-wrap align-items-center w-100"> <button type="button" class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/tanq16" aria-label="github" target="_blank" rel="noopener noreferrer" > <i class="fab fa-github"></i> </a> <a href="https://twitter.com/etheriosking" aria-label="twitter" target="_blank" rel="noopener noreferrer" > <i class="fab fa-twitter"></i> </a> <a href="javascript:location.href = 'mailto:' + ['dragonking47','proton.me'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="https://linkedin.com/in/tanishqrupaal" aria-label="linkedin" target="_blank" rel="noopener noreferrer" > <i class="fab fa-linkedin"></i> </a></div></aside><div id="main-wrapper" class="d-flex justify-content-center"><div class="container d-flex flex-column px-xxl-5"><header id="topbar-wrapper" aria-label="Top Bar"><div id="topbar" class="d-flex align-items-center justify-content-between px-lg-3 h-100" ><nav id="breadcrumb" aria-label="Breadcrumb"> <span> <a href="/blog/"> Home </a> </span> <span>Introduction to Open Source Projects and CMake</span></nav><button type="button" id="sidebar-trigger" class="btn btn-link"> <i class="fas fa-bars fa-fw"></i> </button><div id="topbar-title"> Post</div><button type="button" id="search-trigger" class="btn btn-link"> <i class="fas fa-search fa-fw"></i> </button> <search class="align-items-center ms-3 ms-lg-0"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..." > </search> <button type="button" class="btn btn-link text-decoration-none" id="search-cancel">Cancel</button></div></header><div class="row flex-grow-1"><main aria-label="Main Content" class="col-12 col-lg-11 col-xl-9 px-md-4"><article class="px-1"><header><h1 data-toc-skip>Introduction to Open Source Projects and CMake</h1><div class="post-meta text-muted"> <span> Posted <time data-ts="1623740400" data-df="ll" data-bs-toggle="tooltip" data-bs-placement="bottom" > Jun 15, 2021 </time> </span><div class="d-flex justify-content-between"> <span> By <em> <a href="https://twitter.com/etheriosking">Tanishq Rupaal</a> </em> </span> <span class="readtime" data-bs-toggle="tooltip" data-bs-placement="bottom" title="1858 words" > <em>10 min</em> read</span></div></div></header><div class="content"><h2 id="open-source-projects"><span class="me-2">Open Source Projects</span><a href="#open-source-projects" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><h3 id="anatomy-of-open-source-projects"><span class="me-2">Anatomy of Open Source Projects</span><a href="#anatomy-of-open-source-projects" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>A typical open source project has the following types of people →</p><ul><li>Author - The one who creates the project<li>Owner - The one who has administrative ownership over the organization or the repository<li>Maintainers - Contributors responsible for managing the organizational aspects of the project (may also be authors or owners)<li>Contributors - The ones who have contributed something to the project<li>Community Members - The ones who use the project and may be active in conversations and expression of opinions</ul><p>Bigger projects can also have teams working on a particular task such as tooling, community moderation, etc. Documentation for the project has the following structure →</p><ul><li>License - The Open Source Initiative (OSI) has an approved list of tens of licenses, the most common of which are →<ul><li>GNU’s General Public License (GNU GPL) - Most popular. Created by Richard Stallman. It is copyleft (Any software written based on any GPL component must be released as open source regardless of the percentage in the entire code).<li>Apache Software Foundation (ASF)’s Apache license - This license allows one to freely use, modify and distribute any Apache licensed product (required to follow the terms of the license).<li>MIT License - This allows one to do anything with the software under this license, provided that a copy of the license is included in the work.</ul><p>Other licenses such as BSD licenses, EPL, etc. also exist. All licenses are divided into <strong>permissive</strong> or <strong>copyleft</strong>. MIT, Apache 2.0 and BSD licenses are most popular permissive licenses, while GNU GPLv3 is the most popular copyleft license. Permissive licenses allow developers to include their own copyright statements while copyleft licenses do not (no copyright claims or patents on the original software).</p><li>README - The instruction manual to welcome community members (those who use the project).<li>Contributing - Explains what type of contributions are needed and how the process works.<li>Code Of Conduct - Sets ground rules for participants’ behavior.</ul><p>The following are used for an organized discussion →</p><ul><li>Issue Tracker<li>Pull Requests<li>Discussion Forums<li>Synchronous chat channels</ul><h3 id="contribution-process-flow"><span class="me-2">Contribution Process Flow</span><a href="#contribution-process-flow" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>To make a contribution to a repository, first fork the repository to a personal repository. Then follow the steps of <strong>fork</strong> → <strong>clone</strong> → <strong>push</strong> → <strong>PR</strong>. These steps basically mean →</p><ul><li>Fork the repository of interest to create a copy on github personal account.<li>Clone the repository (personal copy) to the local machine.<li>Change files, add features or any modifications.<li>Add the changes and commit them using <code class="language-plaintext highlighter-rouge">git</code>.<li>Push the changes to the required branch in the remote repository (personal).<li>(Optional) Merge the branch to personal master using <code class="language-plaintext highlighter-rouge">git merge</code>.<li>“Compare and Pull” or “Pull request” button on the repository link is used to create a pull request.</ul><h3 id="facts"><span class="me-2">Facts</span><a href="#facts" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>The base repository from which a fork is made is also called the upstream repository. For <code class="language-plaintext highlighter-rouge">git config</code>, omit the <code class="language-plaintext highlighter-rouge">--global</code> argument to make config changes to only the current git repository.</p><h3 id="cc-projects"><span class="me-2">C/C++ Projects</span><a href="#cc-projects" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><h4 id="project-structure"><span class="me-2">Project Structure</span><a href="#project-structure" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>A basic structure for a C/C++ project would be as follows →</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
</pre><td class="rouge-code"><pre>Project_name
|
|---- CMakeLists.txt
|
|---- include
| |
| |---- Project_name
| |
| |---- public_header(s).h
|
---- src
| |
| |---- private_header(s).h
| |
| |---- code(s).cpp
|
|---- libs
| |
| |---- A
| |
| |---- B
|
|---- tests
</pre></table></code></div></div><p>This could be an example of a library which can be used directly or by a third party. The idea behind the structure is to keep private headers separate from public headers (for functions which anyone using the library can invoke).</p><h4 id="structure-explanation"><span class="me-2">Structure Explanation</span><a href="#structure-explanation" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><ul><li><code class="language-plaintext highlighter-rouge">include/</code> → By convention, this directory is for header files but according to modern practices, it must strictly contain headers that need to be publicly exposed. The directory with the same name as that of the project inside the include directory is used so that it supports generalisation when one imports the public header as → <code class="language-plaintext highlighter-rouge">#include &lt;Project_Name/public_header.h&gt;</code> Instead of <code class="language-plaintext highlighter-rouge">#include &lt;public_header.h&gt;</code><li><code class="language-plaintext highlighter-rouge">src/</code> → This directory contains the source code and header files which are for internal use only. All code that the project consists of goes in here.<li><code class="language-plaintext highlighter-rouge">libs/</code> → This directory contains the third party libraries needed by the project. Usually, these follow the same structure as the one used for this project. Libraries in C++ can be used in one of two ways - static and dynamic. Only static libraries are present in the libs directory.<li><code class="language-plaintext highlighter-rouge">test/</code> → Directory to store unit tests and other kinds of tests, if any.<li><code class="language-plaintext highlighter-rouge">CMakeList.txt</code> → A configuration file to define the function of CMake, which is a build system generator.</ul><h2 id="build-system-generation---cmake"><span class="me-2">Build System Generation - CMake</span><a href="#build-system-generation---cmake" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>CMake is not a build system but a tool that is a build system generator. Usually, a C++ project requires just the following steps after a GitHub clone to run →</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="nb">mkdir </span>build
<span class="nb">cd </span>build
cmake
..
make
</pre></table></code></div></div><p>The first step is just to keep the code clean and build everything in a separate directory. The third step i.e., the <code class="language-plaintext highlighter-rouge">cmake</code> call is to generate a <code class="language-plaintext highlighter-rouge">Makefile</code>. An example is, say one has the following files - <code class="language-plaintext highlighter-rouge">main.cpp</code>, <code class="language-plaintext highlighter-rouge">a.cpp</code>, <code class="language-plaintext highlighter-rouge">a.h</code>, <code class="language-plaintext highlighter-rouge">b.cpp</code>, <code class="language-plaintext highlighter-rouge">b.h</code>. The <code class="language-plaintext highlighter-rouge">main.cpp</code> file has the <code class="language-plaintext highlighter-rouge">main()</code> function and depends on the files <code class="language-plaintext highlighter-rouge">a.cpp</code> and <code class="language-plaintext highlighter-rouge">b.cpp</code>. Therefore, one must run <code class="language-plaintext highlighter-rouge">g++</code> compiler on <code class="language-plaintext highlighter-rouge">a.cpp</code>, then on <code class="language-plaintext highlighter-rouge">b.cpp</code> and finally on <code class="language-plaintext highlighter-rouge">main.cpp</code> with the compile flag i.e., <code class="language-plaintext highlighter-rouge">-c</code>.</p><blockquote class="prompt-info"><p>Header files are not compiled. They just tell the compiler about the function declaration.</p></blockquote><p>Then to link them all together, one must call → <code class="language-plaintext highlighter-rouge">g++ a.o b.o main.o -o binary</code>. Thus, one must compile and link the code in two different orderly steps to generate a binary/executable. To make this easy for a number of files, a tool or a build system named <code class="language-plaintext highlighter-rouge">Make</code> was developed. This reduced the steps to writing a <code class="language-plaintext highlighter-rouge">Makefile</code> and then running the <code class="language-plaintext highlighter-rouge">make</code> tool by pointing it to the location of the <code class="language-plaintext highlighter-rouge">Makefile</code>.</p><p>Though after a point, writing <code class="language-plaintext highlighter-rouge">Makefile</code>s too became tedious, the solution to which was a tool called <code class="language-plaintext highlighter-rouge">cmake</code> which generates <code class="language-plaintext highlighter-rouge">Makefile</code>s using a relatively simpler and easy to maintain <code class="language-plaintext highlighter-rouge">CMakeLists.txt</code> file. This is why it’s called a build system generator. Thus, running the <code class="language-plaintext highlighter-rouge">cmake</code> tool and pointing it to the location of the <code class="language-plaintext highlighter-rouge">CMakeLists.txt</code> file creates a <code class="language-plaintext highlighter-rouge">Makefile</code> in the present working directory. After this, just calling the <code class="language-plaintext highlighter-rouge">make</code> tool to work on the <code class="language-plaintext highlighter-rouge">Makefile</code> will build the project (by default it looks under the build directory unless a specific location is specified).</p><h3 id="cmakelists-details-and-file-types"><span class="me-2">CMakeLists details and file types</span><a href="#cmakelists-details-and-file-types" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>The main types of files that are dealt with are → archive files (<code class="language-plaintext highlighter-rouge">.a</code>), shared objects (<code class="language-plaintext highlighter-rouge">.so</code>), header files (<code class="language-plaintext highlighter-rouge">.h</code>) and objects (<code class="language-plaintext highlighter-rouge">.o</code>). To create object files, the <code class="language-plaintext highlighter-rouge">.c</code> or <code class="language-plaintext highlighter-rouge">.cpp</code> file is compiled with the <code class="language-plaintext highlighter-rouge">-c</code> flag. Files with suffix <code class="language-plaintext highlighter-rouge">.a</code> are called archived files which are used as a statically linked binary i.e., when it is linked with the program, all code defined in the archive is included in the binary.</p><p>To create the archive, the following command is used → </p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre>gcc <span class="nt">-c</span> source1.c
gcc <span class="nt">-c</span> source2.c
ar <span class="nt">-cvq</span> libtest.a source1.o source2.o
gcc main.c libtest.a <span class="nt">-o</span> final
</pre></table></code></div></div><p>The last command is where the <code class="language-plaintext highlighter-rouge">main.c</code> file is compiled with the archive file. The files with the suffix <code class="language-plaintext highlighter-rouge">.so</code> are shared objects which are not included in the final executable. To create a shared library, an object file must be compiled as position independent code or PIC. This is done as follows → </p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>gcc <span class="nt">-fPIC</span> <span class="nt">-c</span> source1.c source2.c gcc <span class="nt">-shared</span> <span class="nt">-o</span> libtest.so source1.o source2.o
</pre></table></code></div></div><p>To link the code of either archived files or shared objects, the <code class="language-plaintext highlighter-rouge">-l</code> flag is used as follows →</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>gcc main.c <span class="nt">-ltest</span> <span class="nt">-o</span> final
</pre></table></code></div></div><p>The <code class="language-plaintext highlighter-rouge">-ltest</code> argument looks for either <code class="language-plaintext highlighter-rouge">libtest.so</code> or <code class="language-plaintext highlighter-rouge">libtest.a</code>. Some projects provide both a dynamic shared library and a statically linked library to let the user choose the required method. The other way for using a statically linked library is as shown earlier while creating the archive. Header files (<code class="language-plaintext highlighter-rouge">.h</code>) are not compiled. They are included in <code class="language-plaintext highlighter-rouge">.c</code> files to inform the compiler about functions. Once the compiler cross-references everything, their information is discarded and they do not affect the final executable size. The capital i flag, <code class="language-plaintext highlighter-rouge">-I</code>, is used to specify which directories contain header files. The flag <code class="language-plaintext highlighter-rouge">-L</code> is used to tell the compiler which directories contain the static libraries (<code class="language-plaintext highlighter-rouge">.a</code>). The lowercase l flag, <code class="language-plaintext highlighter-rouge">-l</code>, is used to specify the name of the library to be linked i.e., <code class="language-plaintext highlighter-rouge">-l test</code> means that the compiler looks for <code class="language-plaintext highlighter-rouge">libtest.a</code> or <code class="language-plaintext highlighter-rouge">testlib.a</code> or a similar shared object.</p><h3 id="cmake"><span class="me-2">CMake</span><a href="#cmake" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>A standard compile command needs to have the following basic things →</p><ul><li>Path to files that need to be compiled.<li>Path to header files including those which are used from third party libraries.<li>Paths to third party libraries’ <code class="language-plaintext highlighter-rouge">.a</code> files.<li>Names of the .a files that the compiler should link with the code.</ul><p>This is automated by CMake, which has 5 major sections - flags, files, include, targets, external libraries, unit testing. In order, a <code class="language-plaintext highlighter-rouge">CMakeLists.txt</code> file will have the following (prefixed with <code class="language-plaintext highlighter-rouge">#</code>) →</p><ul><li>Version → This is to tell <code class="language-plaintext highlighter-rouge">CMake</code> which version of the tool to use. Cannot use a version lower than that specified.<li>Project Name<li>Flags → Tells <code class="language-plaintext highlighter-rouge">CMake</code> which compiler and version of compiler to use to build the project with. With an empty value, it sets the best fit on its own.<li>Files → Specify all files and club them into variable names like source, include, etc. But this can be skipped and the filenames can be used directly.<li>Include → This is used to specify the path of include directories that the compiler must look into while searching for header files. This also includes header files from third party libraries.<li>Target → The name of the output file is specified first. All names after that are the source files that need to be compiled. <code class="language-plaintext highlighter-rouge">&lt;output&gt;</code><li><p>External Library → The linking of libraries. In previous steps the location of header files for third party libraries were informed to the compiler. This step is used to inform it about the location of the libraries. By convention, library files are named with <code class="language-plaintext highlighter-rouge">lib</code> as a prefix or suffix.</p><ul><li><p>If a <code class="language-plaintext highlighter-rouge">.a</code> file has already been compiled and <code class="language-plaintext highlighter-rouge">CMake</code> isn’t required to do it, then the following is written →</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre>  add_library(&lt;name from libname.a&gt; STATIC IMPORTED)
  set_property(TARGET &lt;name&gt; PROPERTY IMPORTED_LOCATION ${CMAKE_SOURCE_DIR}/&lt;path to .a file from there&gt;)
  target_link_libraries(&lt;output&gt; &lt;name&gt;)
</pre></table></code></div></div><li><p>If the library is not compiled, but has a CMakeLists.txt file of its own then the following can be written →</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>  add_subdirectory(&lt;path to library directory with CMakeLists.txt&gt;/&lt;library_project_name&gt;)
  target_link_libraries(&lt;output&gt; &lt;filename of .a that results from internal CMakeLists.txt&gt;)
</pre></table></code></div></div></ul></ul><p>This concludes the <code class="language-plaintext highlighter-rouge">CMakeLists.txt</code> file. An example <code class="language-plaintext highlighter-rouge">CMakeLists.txt</code> file is as follows →</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
</pre><td class="rouge-code"><pre>cmake_minimum_required( VERSION 3.0 )
project( sample_cmake )

# flags
# include files
include_directories( ./include ./src ./libs/Logger/include ./libs/Randomize/include )

# target
add_executable( binary ./src/main.cpp ./src/game_engine.cpp ./src/game_interface.cpp )

# 3rd party libs
add_subdirectory( ./libs/Logger )
target_link_libraries( binary logger )

add_library(randomize STATIC IMPORTED)
set_property(TARGET randomize PROPERTY IMPORTED_LOCATION ${CMAKE_SOURCE_DIR}/libs/Randomize/librandomize.a)
target_link_libraries( binary randomize )
</pre></table></code></div></div></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw me-1"></i> <a href="/blog/categories/computers-and-fun/">Computers and Fun</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw me-1"></i> <a href="/blog/tags/open-source/" class="post-tag no-text-decoration" >open-source</a> <a href="/blog/tags/cmake/" class="post-tag no-text-decoration" >cmake</a> <a href="/blog/tags/make/" class="post-tag no-text-decoration" >make</a></div><div class=" post-tail-bottom d-flex justify-content-between align-items-center mt-5 pb-2 " ><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper d-flex align-items-center"> <span class="share-label text-muted">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Introduction%20to%20Open%20Source%20Projects%20and%20CMake%20-%20Tanishq%20Rupaal&url=https%3A%2F%2Ftanishq.page%2Fblog%2Fposts%2Fopen-source-build%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Twitter" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Introduction%20to%20Open%20Source%20Projects%20and%20CMake%20-%20Tanishq%20Rupaal&u=https%3A%2F%2Ftanishq.page%2Fblog%2Fposts%2Fopen-source-build%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Facebook" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https%3A%2F%2Ftanishq.page%2Fblog%2Fposts%2Fopen-source-build%2F&text=Introduction%20to%20Open%20Source%20Projects%20and%20CMake%20-%20Tanishq%20Rupaal" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Telegram" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <a href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Ftanishq.page%2Fblog%2Fposts%2Fopen-source-build%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Linkedin" aria-label="Linkedin"> <i class="fa-fw fab fa-linkedin"></i> </a> <button id="copy-link" aria-label="Copy link" class="btn small" data-bs-toggle="tooltip" data-bs-placement="top" title="Copy link" data-title-succeed="Link copied successfully!" > <i class="fa-fw fas fa-link pe-none fs-6"></i> </button> </span></div></div></div></article></main><aside aria-label="Panel" id="panel-wrapper" class="col-xl-3 ps-2 mb-5 text-muted"><div class="access"><section id="access-lastmod"><h2 class="panel-heading">Recently Updated</h2><ul class="content list-unstyled ps-0 pb-1 ms-1 mt-2"><li class="text-truncate lh-lg"> <a href="/blog/posts/homelab-linkwarden/">Bookmark Manager in Home Lab</a><li class="text-truncate lh-lg"> <a href="/blog/posts/homelab-budgeting/">Personal Finance Budgeting in Home Lab</a><li class="text-truncate lh-lg"> <a href="/blog/posts/entertainment-dbzcelltimeline/">Dragon Ball Z - Cell Saga Timeline 101</a><li class="text-truncate lh-lg"> <a href="/blog/posts/homelab-excalidraw/">Excalidraw in Home Lab</a><li class="text-truncate lh-lg"> <a href="/blog/posts/homelab-budgeter/">Expense Tracking in Home Lab</a></ul></section><section><h2 class="panel-heading">Trending Tags</h2><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/blog/tags/lab/">lab</a> <a class="post-tag btn btn-outline-primary" href="/blog/tags/offsec-proving-grounds/">offsec-proving-grounds</a> <a class="post-tag btn btn-outline-primary" href="/blog/tags/oscp/">oscp</a> <a class="post-tag btn btn-outline-primary" href="/blog/tags/home-lab/">home-lab</a> <a class="post-tag btn btn-outline-primary" href="/blog/tags/productivity/">productivity</a> <a class="post-tag btn btn-outline-primary" href="/blog/tags/security/">security</a> <a class="post-tag btn btn-outline-primary" href="/blog/tags/aws/">aws</a> <a class="post-tag btn btn-outline-primary" href="/blog/tags/programming/">programming</a> <a class="post-tag btn btn-outline-primary" href="/blog/tags/github/">github</a> <a class="post-tag btn btn-outline-primary" href="/blog/tags/linux/">linux</a></div></section></div><section id="toc-wrapper" class="ps-0 pe-4"><h2 class="panel-heading ps-3 pt-2 mb-2">Contents</h2><nav id="toc"></nav></section></aside></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 px-md-4"><aside id="related-posts" aria-labelledby="related-label"><h3 class="mb-4" id="related-label">Further Reading</h3><nav class="row row-cols-1 row-cols-md-2 row-cols-xl-3 g-4 mb-4"><article class="col"> <a href="/blog/posts/github-fundamentals/" class="post-preview card h-100"><div class="card-body"> <time data-ts="1651406400" data-df="ll" > May 1, 2022 </time><h4 class="pt-0 my-2">Fundamentals of GitHub</h4><div class="text-muted"><p> Introduction This blog is a primer of how basic GitHub collaboration works. This is not exhaustive of all features and tidbits but a basic explanation sheet to help people work on GitHub with relat...</p></div></div></a></article><article class="col"> <a href="/blog/posts/linux-device-drivers/" class="post-preview card h-100"><div class="card-body"> <time data-ts="1568271600" data-df="ll" > Sep 12, 2019 </time><h4 class="pt-0 my-2">Linux Device Drivers</h4><div class="text-muted"><p> This is a practical study I made using some videos and written resources to understand device drivers to some extent. Building a module Device drivers hide the details of how the device works. Us...</p></div></div></a></article><article class="col"> <a href="/blog/posts/java-socket-programming/" class="post-preview card h-100"><div class="card-body"> <time data-ts="1590667200" data-df="ll" > May 28, 2020 </time><h4 class="pt-0 my-2">Basics of Socket Programming in Java</h4><div class="text-muted"><p> Simple Client Program import java.util.*; import java.net.*; import java.io.*; public class client { public static void main(String[] args) throws Exception { Socket s = new Socke...</p></div></div></a></article></nav></aside><nav class="post-navigation d-flex justify-content-between" aria-label="Post Navigation"> <a href="/blog/posts/incident-response/" class="btn btn-outline-primary" aria-label="Older" ><p>Introduction to Incident Response</p></a> <a href="/blog/posts/oscp-pg-bbs-cute/" class="btn btn-outline-primary" aria-label="Newer" ><p>OffSec PG - BBS Cute</p></a></nav><footer aria-label="Site Info" class=" d-flex flex-column justify-content-center text-muted flex-lg-row justify-content-lg-between align-items-lg-center pb-lg-3 " ><p> © <time>2024</time> <a href="https://twitter.com/etheriosking">Tanishq Rupaal</a>. <span data-bs-toggle="tooltip" data-bs-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author." >Some rights reserved.</span></p><p>Using the <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme for <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a>.</p></footer></div></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-11 content"><div id="search-hints"><section><h2 class="panel-heading">Trending Tags</h2><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/blog/tags/lab/">lab</a> <a class="post-tag btn btn-outline-primary" href="/blog/tags/offsec-proving-grounds/">offsec-proving-grounds</a> <a class="post-tag btn btn-outline-primary" href="/blog/tags/oscp/">oscp</a> <a class="post-tag btn btn-outline-primary" href="/blog/tags/home-lab/">home-lab</a> <a class="post-tag btn btn-outline-primary" href="/blog/tags/productivity/">productivity</a> <a class="post-tag btn btn-outline-primary" href="/blog/tags/security/">security</a> <a class="post-tag btn btn-outline-primary" href="/blog/tags/aws/">aws</a> <a class="post-tag btn btn-outline-primary" href="/blog/tags/programming/">programming</a> <a class="post-tag btn btn-outline-primary" href="/blog/tags/github/">github</a> <a class="post-tag btn btn-outline-primary" href="/blog/tags/linux/">linux</a></div></section></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><aside aria-label="Scroll to Top"> <button id="back-to-top" type="button" class="btn btn-lg btn-box-shadow"> <i class="fas fa-angle-up"></i> </button></aside></div><div id="mask"></div><aside id="notification" class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-bs-animation="true" data-bs-autohide="false" ><div class="toast-header"> <button type="button" class="btn-close ms-auto" data-bs-dismiss="toast" aria-label="Close" ></button></div><div class="toast-body text-center pt-0"><p class="px-2 mb-3">A new version of content is available.</p><button type="button" class="btn btn-primary" aria-label="Update"> Update </button></div></aside><script src="https://cdn.jsdelivr.net/combine/npm/jquery@3.7.1/dist/jquery.min.js,npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js,npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js,npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.umd.min.js,npm/magnific-popup@1.1.0/dist/jquery.magnific-popup.min.js,npm/clipboard@2.0.11/dist/clipboard.min.js,npm/dayjs@1.11.10/dayjs.min.js,npm/dayjs@1.11.10/locale/en.min.js,npm/dayjs@1.11.10/plugin/relativeTime.min.js,npm/dayjs@1.11.10/plugin/localizedFormat.min.js,npm/tocbot@4.25.0/dist/tocbot.min.js"></script> <script defer src="/blog/assets/js/dist/post.min.js"></script> <script defer src="/blog/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-B88HEPZBVJ"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-B88HEPZBVJ'); }); </script> <script> /* Note: dependent library will be loaded in `js-selector.html` */ SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/blog/assets/js/data/search.json', searchResultTemplate: '<article class="px-1 px-sm-2 px-lg-4 px-xl-0"><header><h2><a href="{url}">{title}</a></h2><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div></header><p>{snippet}</p></article>', noResultsText: '<p class="mt-5"></p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="me-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script>
